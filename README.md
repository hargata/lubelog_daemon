# LubeLogger Daemon

## What

This is a sidecar service for LubeLogger that allows for real-time integration with notification systems such as Ntfy, Gotify, and Discord Webhooks.

## How it works

<img width="789" height="315" alt="image" src="https://github.com/user-attachments/assets/dd4db522-007a-404f-8e7b-fc9e367f6b95" />

This project essentially retrieves reminders from your LubeLogger instance and compares those reminders to a cached copy(stored in memory), if there are changes detected(i.e.: a reminder has moved from Not Urgent to Urgent), then it will fire off a notification payload to the integrated services.

Additionally, it can also forward the webhook payload to multiple additional webhook ingestions, so this doesn't entirely replace your existing webhook integrations.

For date-based reminders, this service comes with a background taskworker that will check and send out reminders at a fixed time every day.

## Security(or lack thereof)

This should run within a private network where it can access your LubeLogger instance as well as any notification integrations you have configured, there are no security features for this service.

## Getting Started

[Video Walkthrough and Documentation](https://github.com/hargata/lubelog_daemon/wiki/Getting-Started)

### Configuration
| Key                 | Description                                                                                 | Example Value                                     |
|---------------------|---------------------------------------------------------------------------------------------|---------------------------------------------------|
| instanceUrl         | URL to LubeLogger                                                                           | "https://demo.lubelogger.com"                     |
| apiKey              | An API Key generated by the Root User                                                       | "bed6bd6b39904a94ac5368fcfa310aae"                |
| hourToCheck         | UTC Time of day to check for date-based reminders                                           | "5" means that it will check at 5 AM UTC everyday |
| checkDateReminders  | Whether the service should check for date-based reminders                                   | "true" or "false"                                 |
| daysToCache         | Number of days the reminders should be cached so they don't remind the users multiple times | "1" (Absolute Values Only)                        |
| urgenciesTracked    | List of urgencies the service should track when reminders move into these statuses          | "noturgent", "urgent", "veryurgent", "pastdue"    |
| webHookForwards     | List of webhooks to forward the original webhook payload to                                 | "webhooksite1", "webhooksite2"                    |
| notificationConfigs | List of notification configs                                                                | See "SampleConfigs"                               |

## Quirks

If you have {vehicleId} in any of the URL's, they will always be substituted with the Id of the vehicle, this allows you to send different notifications depending on the vehicle, see the ntfy sampleconfig for an example
